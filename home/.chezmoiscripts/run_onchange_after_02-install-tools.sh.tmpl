#!/usr/bin/env bash
source {{ .chezmoi.sourceDir }}/../scripts/lib/dybatpho/init.sh
dybatpho::register_err_handler

_install_package_tools() {
  {{ .chezmoi.homeDir  }}/.config/dytoy/os.sh -e
}

_install_binary_tools() {
  {{ .chezmoi.homeDir  }}/.config/dytoy/binary.sh -e -n
}

_install_shell_tools() {
  {{ .chezmoi.homeDir  }}/.config/dytoy/shell.sh -e
}

_install_mise_tools() {
  {{ .chezmoi.homeDir  }}/.config/dytoy/mise.sh -e
}

_main() {
  _install_package_tools
  _install_binary_tools
  _install_shell_tools
  _install_mise_tools
}

export PATH=~/.local/bin:$PATH

dybatpho::notice "Install tools"
{{- range (joinPath .chezmoi.sourceDir ".chezmoitemplates/dytoy/tools/*" | glob) }}
# {{ . }} hash: {{ . | include | sha256sum }}
{{- end }}
_main
dybatpho::success "Installed tools"
