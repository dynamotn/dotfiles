name: tldr
is_essential: true
{{- if and (eq .kind "container") (eq .chezmoi.os "linux-arch") }}
# Use package only on Archlinux container
method: os
# https://repology.org/project/tealdeer/versions
arch:
  packages:
    - name: tealdeer
{{- else }}
method: binary
github:
  repo: dbrgn/tealdeer
  {{- $arch := "" }}
  {{- if eq .chezmoi.arch "amd64" }}
  {{-   $arch = "x86_64" }}
  {{- else if eq .chezmoi.arch "arm64" }}
  {{-   $arch = "aarch64" }}
  {{- end }}
  {{- $variant := "" }}
  {{- if eq .chezmoi.os "darwin" }}
  {{-   $variant = printf "macos-%s" $arch }}
  {{- else if eq .chezmoi.os "linux" "android" }}
  {{-   $variant = printf "linux-%s-musl" $arch }}
  {{- end }}
  release_asset: tealdeer-{{ $variant }}
{{- end }}
